# Bitacora 010_02_23_2026 11:59:07 avance_act_0009_y_0010

## Que fue lo que se hizo
- Se cerraron las actividades ACT_0009 y ACT_0010 de la epica EP_001 en backend.
- Se implemento la clasificacion de burbujas por ROI para determinar estados `marcada`, `no_marcada` y `ambigua` de forma reproducible.
- Se agrego construccion de salida final por pregunta/opcion con validaciones de consistencia para evitar omisiones, duplicados y desajustes de conteo.
- Se actualizo el CLI de lectura para producir JSON estructurado por preguntas y mantener detalle por burbuja para depuracion.
- Se a√±adieron pruebas automaticas unitarias para clasificacion y para construccion del JSON final.
- Se actualizaron estados de actividades en planeacion moviendo TODO a DONE para ACT_0009 y ACT_0010.
- Archivos clave creados/modificados:
  - `src/backend/app/modules/omr_reader/bubble_classifier.py`
  - `src/backend/app/modules/omr_reader/result_builder.py`
  - `src/backend/app/modules/omr_reader/scripts/classify_bubbles.py`
  - `src/backend/app/modules/omr_reader/__init__.py`
  - `src/backend/tests/test_omr_bubble_classifier.py`
  - `src/backend/tests/test_omr_result_builder.py`
  - `src/backend/README.md`
  - `planeacion/02_actividades/epicas/EP_001_lectura_movil_local_omr_a_json/ACT_0009_HU_03_EP_001_DONE.md`
  - `planeacion/02_actividades/epicas/EP_001_lectura_movil_local_omr_a_json/ACT_0010_HU_04_EP_001_DONE.md`

## Para que se hizo
- Entregar una lectura OMR util para negocio: no solo metricas de burbuja, sino respuestas organizadas por pregunta.
- Asegurar trazabilidad y calidad de datos para siguientes actividades de precision y evaluacion.

## Que problemas se presentaron
- Al ejecutar tests con el interprete global fallo la coleccion por falta de `cv2`.
- Existia riesgo de incoherencia entre burbujas leidas y estructura esperada por pregunta si no se validaba el mapeo completo.

## Como se resolvieron
- Se ejecuto la suite con el entorno virtual del proyecto para usar dependencias correctas.
- Se agregaron validaciones explicitas en el constructor de resultados para detectar:
  - burbujas faltantes en salida,
  - burbujas extras no referenciadas por metadata,
  - duplicados en resultados o en definicion de opciones.
- Se dejaron pruebas que cubren casos exitosos y de error para evitar regresiones.

## Que continua
- Avanzar con ACT_0011 para medir precision sobre set de fotos con verdad esperada y reporte de metricas.
- Refinar umbrales de clasificacion y robustez segun resultados de pruebas masivas.

*(Agregar enlaces a archivos clave o referencias adicionales si aplica.)*
